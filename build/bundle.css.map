{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "Disc.svelte",
    "Field.svelte",
    "GameResults.svelte",
    "Marker.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { STATE } from '../common';\n  // Disc flip animation\n  export const swapTrn = (_, { duration = 300 }) => ({\n    duration,\n    css: (t, u) => {\n      return `\n      transform: rotateX(${t * 0.5}turn)\n                 scale(${(t >= 0.5 ? u : t) * 2 + 1});\n      visibility: ${t >= 0.5 ? 'visible' : 'hidden'};\n    `;\n    },\n  });\n\n  export let color;\n</script>\n\n<style>\n  .root {\n    display: block;\n    position: relative;\n    width: 3em;\n    height: 3em;\n    background: green;\n    cursor: pointer;\n  }\n  .disc {\n    width: 2em;\n    height: 2em;\n    position: absolute;\n    border-radius: 1em;\n    top: 0.5em;\n    left: 0.5em;\n    box-sizing: border-box;\n  }\n  .w {\n    background: white;\n  }\n  .b {\n    background: black;\n  }\n</style>\n\n<div class=\"root\" on:click>\n  {#if color === STATE.BLACK}\n    <div class=\"disc b\" transition:swapTrn />\n  {/if}\n\n  {#if color === STATE.WHITE}\n    <div class=\"disc w\" transition:swapTrn />\n  {/if}\n</div>\n",
    "<script>\n  import Disc from './Disc.svelte';\n  import GameResults from './GameResults.svelte';\n  import Marker, { onMouseMove, onMouseLeave } from './Marker.svelte';\n  import { STATE } from '../common';\n  import { gameState } from './game';\n  import { sendMove } from './controllers';\n\n  let fieldNode;\n  let fieldBounds;\n  function setBounds() {\n    fieldBounds = fieldNode?.getBoundingClientRect();\n  }\n\n  $: setBounds(), fieldNode;\n  $: iswhite = $gameState.move === STATE.WHITE;\n  $: remainingDiscs = 64 - $gameState.board.filter((c) => c > 0).length;\n  $: isGameEnded = [STATE.TIE, STATE.BLACK_WON, STATE.WHITE_WON].includes(\n    $gameState.move\n  );\n\n  let interactionDisabled = true;\n  $: {\n    if ($gameState.isLoading) {\n      interactionDisabled = true;\n    } else if (\n      typeof $gameState.playerColor === 'number' &&\n      $gameState.playerColor !== $gameState.move\n    ) {\n      interactionDisabled = true;\n    } else {\n      interactionDisabled = false;\n    }\n  }\n</script>\n\n<style>\n  .field-container {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .field-root {\n    position: relative;\n    display: grid;\n    grid-template-columns: repeat(8, auto);\n    justify-content: center;\n    grid-gap: 2px;\n    transition: filter 2s;\n  }\n  .game-status span {\n    transition: transform 0.2s;\n    font-size: 3em;\n    display: inline-block;\n  }\n  .iswhite {\n    transform: scaleX(-1);\n  }\n  .blurred {\n    filter: blur(8px);\n  }\n  .disabled-overlay {\n    cursor: not-allowed;\n    position: absolute;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    display: none;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .disabled-overlay.interactionDisabled {\n    display: flex;\n  }\n</style>\n\n<svelte:window on:resize={setBounds} />\n\n<div class=\"field-container\">\n  <div class=\"game-status\">\n    <span>&#x1F31A</span>\n    <span class:iswhite>&#x1F448</span>\n    <span>&#x1F31D</span>\n    <span>&nbsp;</span>\n    <span>&#x26AA</span>\n    <span>x{remainingDiscs}</span>\n  </div>\n  <div\n    class=\"field-root\"\n    class:blurred={isGameEnded}\n    bind:this={fieldNode}\n    on:mousemove={(e) => onMouseMove(e, fieldBounds)}\n    on:mouseleave={onMouseLeave}>\n    {#each $gameState.board as item, i}\n      <Disc on:click={() => sendMove(i)} color={item} />\n    {/each}\n    <Marker {fieldBounds} />\n    <div class=\"disabled-overlay\" class:interactionDisabled>\n      {#if $gameState.isLoading}Loading...{/if}\n    </div>\n  </div>\n  <GameResults />\n</div>\n",
    "<script>\n  import { STATE } from '../common';\n  import { gameState } from './game';\n  import { restartGame } from './controllers';\n\n  $: isGameEnded = [STATE.TIE, STATE.BLACK_WON, STATE.WHITE_WON].includes(\n    $gameState.move\n  );\n  let winText;\n  $: {\n    if ($gameState.move === STATE.TIE) {\n      winText = 'ü§∑Tie!';\n    } else {\n      const face = $gameState.move === STATE.WHITE_WON ? 'üåù' : 'üåö';\n      winText = `${face} won!`;\n    }\n  }\n</script>\n\n<style>\n  .root {\n    position: absolute;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n  .root h1 {\n    font-size: 3em;\n    color: white;\n    text-shadow: black 0px 0px 5px;\n  }\n</style>\n\n{#if isGameEnded}\n  <div class=\"root\" on:click={restartGame}>\n    <h1>{winText}</h1>\n  </div>\n{/if}\n",
    "<script context=\"module\">\n  import { writable } from 'svelte/store';\n  const markerState = writable({ visible: false });\n\n  export function onMouseMove(evt, fieldBounds) {\n    const { left, top, width, height } = fieldBounds;\n    const { clientX, clientY } = evt;\n    const [x, y] = [\n      (((clientX - left) / width) * 8) | 0,\n      (((clientY - top) / height) * 8) | 0,\n    ];\n    markerState.update((s) => {\n      if (x === s.x && y === s.y && s.visible) {\n        return s;\n      }\n      return { ...s, x, y, visible: true };\n    });\n  }\n\n  export function onMouseLeave() {\n    markerState.update((s) => ({ ...s, visible: false }));\n  }\n</script>\n\n<script>\n  import { xy2i } from '../common/utils';\n  import { gameState } from './game';\n\n  export let fieldBounds;\n\n  let markerStyle = '';\n  $: allow = $gameState.possibleMoves.has(xy2i($markerState.x, $markerState.y));\n\n  $: {\n    if (fieldBounds) {\n      const { x, y } = $markerState;\n      markerStyle = `\n        left: ${(x / 8) * (fieldBounds.width - 14) + x * 2}px;\n        top: ${(y / 8) * (fieldBounds.height - 14) + y * 2}px;\n      `;\n    }\n  }\n</script>\n\n<style>\n  .marker {\n    width: 3em;\n    height: 3em;\n    position: absolute;\n    box-sizing: border-box;\n    pointer-events: none;\n    opacity: 0;\n    transition: left 0.2s, top 0.2s, border-color 0.2s, opacity 0.2s;\n    border: 2px solid tomato;\n  }\n  .visible {\n    opacity: 1;\n  }\n  .allow {\n    border: 2px solid lime;\n  }\n</style>\n\n<div\n  class=\"marker\"\n  class:allow\n  class:visible={$markerState.visible}\n  style={markerStyle} />\n"
  ],
  "names": [],
  "mappings": "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"
}