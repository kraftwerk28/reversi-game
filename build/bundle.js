var app=function(){"use strict";function t(){}const n=t=>t;function e(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(e)}function s(t){return"function"==typeof t}function l(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t,n){return t!=t?n==n:t!==n}const i="undefined"!=typeof window;let u=i?()=>window.performance.now():()=>Date.now(),a=i?t=>requestAnimationFrame(t):t;const f=new Set;function d(t){f.forEach(n=>{n.c(t)||(f.delete(n),n.f())}),0!==f.size&&a(d)}function h(t,n){t.appendChild(n)}function p(t,n,e){t.insertBefore(n,e||null)}function $(t){t.parentNode.removeChild(t)}function g(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function b(){return m(" ")}function v(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function y(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function _(t,n,e){t.classList[e?"add":"remove"](n)}const x=new Set;let E,w=0;function C(t,n,e,o,r,s,l,c=0){const i=16.666/o;let u="{\n";for(let t=0;t<=1;t+=i){const o=n+(e-n)*s(t);u+=100*t+`%{${l(o,1-o)}}\n`}const a=u+`100% {${l(e,1-e)}}\n}`,f=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(a)}_${c}`,d=t.ownerDocument;x.add(d);const h=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild(g("style")).sheet),p=d.__svelte_rules||(d.__svelte_rules={});p[f]||(p[f]=!0,h.insertRule(`@keyframes ${f} ${a}`,h.cssRules.length));const $=t.style.animation||"";return t.style.animation=`${$?$+", ":""}${f} ${o}ms linear ${r}ms 1 both`,w+=1,f}function k(t,n){const e=(t.style.animation||"").split(", "),o=e.filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")),r=e.length-o.length;r&&(t.style.animation=o.join(", "),w-=r,w||a(()=>{w||(x.forEach(t=>{const n=t.__svelte_stylesheet;let e=n.cssRules.length;for(;e--;)n.deleteRule(e);t.__svelte_rules={}}),x.clear())}))}function A(t){E=t}const z=[],B=[],L=[],T=[],K=Promise.resolve();let N=!1;function O(t){L.push(t)}let W=!1;const I=new Set;function H(){if(!W){W=!0;do{for(let t=0;t<z.length;t+=1){const n=z[t];A(n),q(n.$$)}for(A(null),z.length=0;B.length;)B.pop()();for(let t=0;t<L.length;t+=1){const n=L[t];I.has(n)||(I.add(n),n())}L.length=0}while(z.length);for(;T.length;)T.pop()();N=!1,W=!1,I.clear()}}function q(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(O)}}let R;function j(t,n,e){t.dispatchEvent(function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(`${n?"intro":"outro"}${e}`))}const S=new Set;let M;function P(){M={r:0,c:[],p:M}}function D(){M.r||r(M.c),M=M.p}function X(t,n){t&&t.i&&(S.delete(t),t.i(n))}function F(t,n,e,o){if(t&&t.o){if(S.has(t))return;S.add(t),M.c.push(()=>{S.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}const Y={duration:0};function G(e,o,l,c){let i=o(e,l),h=c?0:1,p=null,$=null,g=null;function m(){g&&k(e,g)}function b(t,n){const e=t.b-h;return n*=Math.abs(e),{a:h,b:t.b,d:e,duration:n,start:t.start,end:t.start+n,group:t.group}}function v(o){const{delay:s=0,duration:l=300,easing:c=n,tick:v=t,css:y}=i||Y,_={start:u()+s,b:o};o||(_.group=M,M.r+=1),p||$?$=_:(y&&(m(),g=C(e,h,o,l,s,c,y)),o&&v(0,1),p=b(_,l),O(()=>j(e,o,"start")),function(t){let n;0===f.size&&a(d),new Promise(e=>{f.add(n={c:t,f:e})})}(t=>{if($&&t>$.start&&(p=b($,l),$=null,j(e,p.b,"start"),y&&(m(),g=C(e,h,p.b,p.duration,0,c,i.css))),p)if(t>=p.end)v(h=p.b,1-h),j(e,p.b,"end"),$||(p.b?m():--p.group.r||r(p.group.c)),p=null;else if(t>=p.start){const n=t-p.start;h=p.a+p.d*c(n/p.duration),v(h,1-h)}return!(!p&&!$)}))}return{run(t){s(i)?(R||(R=Promise.resolve(),R.then(()=>{R=null})),R).then(()=>{i=i(),v(t)}):v(t)},end(){m(),p=$=null}}}function J(t){t&&t.c()}function Q(t,n,o){const{fragment:l,on_mount:c,on_destroy:i,after_update:u}=t.$$;l&&l.m(n,o),O(()=>{const n=c.map(e).filter(s);i?i.push(...n):r(n),t.$$.on_mount=[]}),u.forEach(O)}function U(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function V(t,n){-1===t.$$.dirty[0]&&(z.push(t),N||(N=!0,K.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function Z(n,e,s,l,c,i,u=[-1]){const a=E;A(n);const f=e.props||{},d=n.$$={fragment:null,ctx:null,props:i,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:o(),dirty:u,skip_bound:!1};let h=!1;if(d.ctx=s?s(n,f,(t,e,...o)=>{const r=o.length?o[0]:e;return d.ctx&&c(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),h&&V(n,t)),e}):[],d.update(),h=!0,r(d.before_update),d.fragment=!!l&&l(d.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);d.fragment&&d.fragment.l(t),t.forEach($)}else d.fragment&&d.fragment.c();e.intro&&X(n.$$.fragment),Q(n,e.target,e.anchor),H()}A(a)}class tt{$destroy(){U(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const nt=(t,{duration:e=300})=>({duration:e,easing:n,css:(t,n)=>`\n      transform: rotateX(${.5*t}turn)\n                 scale(${2*(t>=.5?n:t)+1});\n      visibility: ${t>=.5?"visible":"hidden"};\n    `}),et=(t,n)=>8*n+t,ot=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];const rt={NONE:0,BLACK:1,WHITE:2,BLACK_WON:3,WHITE_WON:4,TIE:5};function st(t){let n,e,o;return{c(){n=g("div"),y(n,"class","disc b svelte-1pbl36q")},m(t,e){p(t,n,e),o=!0},i(t){o||(O(()=>{e||(e=G(n,nt,{},!0)),e.run(1)}),o=!0)},o(t){e||(e=G(n,nt,{},!1)),e.run(0),o=!1},d(t){t&&$(n),t&&e&&e.end()}}}function lt(t){let n,e,o;return{c(){n=g("div"),y(n,"class","disc w svelte-1pbl36q")},m(t,e){p(t,n,e),o=!0},i(t){o||(O(()=>{e||(e=G(n,nt,{},!0)),e.run(1)}),o=!0)},o(t){e||(e=G(n,nt,{},!1)),e.run(0),o=!1},d(t){t&&$(n),t&&e&&e.end()}}}function ct(t){let n,e,o,r,s,l=t[0]===rt.BLACK&&st(),c=t[0]===rt.WHITE&&lt();return{c(){n=g("div"),l&&l.c(),e=b(),c&&c.c(),y(n,"class","root svelte-1pbl36q")},m(i,u){p(i,n,u),l&&l.m(n,null),h(n,e),c&&c.m(n,null),o=!0,r||(s=v(n,"click",t[1]),r=!0)},p(t,[o]){t[0]===rt.BLACK?l?1&o&&X(l,1):(l=st(),l.c(),X(l,1),l.m(n,e)):l&&(P(),F(l,1,1,()=>{l=null}),D()),t[0]===rt.WHITE?c?1&o&&X(c,1):(c=lt(),c.c(),X(c,1),c.m(n,null)):c&&(P(),F(c,1,1,()=>{c=null}),D())},i(t){o||(X(l),X(c),o=!0)},o(t){F(l),F(c),o=!1},d(t){t&&$(n),l&&l.d(),c&&c.d(),r=!1,s()}}}function it(t,n,e){let{color:o}=n;return t.$$set=t=>{"color"in t&&e(0,o=t.color)},[o,function(n){!function(t,n){const e=t.$$.callbacks[n.type];e&&e.slice().forEach(t=>t(n))}(t,n)}]}class ut extends tt{constructor(t){super(),Z(this,t,it,ct,l,{color:0})}}function at(t,n,e){const o=t.slice();return o[12]=n[e],o[14]=e,o}function ft(t){let n,e;return n=new ut({props:{color:t[12]}}),n.$on("click",(function(...n){return t[7](t[14],...n)})),{c(){J(n.$$.fragment)},m(t,o){Q(n,t,o),e=!0},p(e,o){t=e;const r={};1&o&&(r.color=t[12]),n.$set(r)},i(t){e||(X(n.$$.fragment,t),e=!0)},o(t){F(n.$$.fragment,t),e=!1},d(t){U(n,t)}}}function dt(t){let n,e,o,s,l,c,i,u,a,f,d,x,E,w,C,k,A,z,B,L,T,K,N=64-t[0].board.filter(ht).length+"",O=t[0].board,W=[];for(let n=0;n<O.length;n+=1)W[n]=ft(at(t,O,n));const I=t=>F(W[t],1,1,()=>{W[t]=null});return{c(){n=g("div"),e=g("div"),o=g("span"),o.textContent="üåö",s=b(),l=g("span"),l.textContent="üëà",c=b(),i=g("span"),i.textContent="üåù",u=b(),a=g("span"),a.textContent="¬†",f=b(),d=g("span"),d.textContent="‚ö™",x=b(),E=g("span"),w=m("x"),C=m(N),k=b(),A=g("div");for(let t=0;t<W.length;t+=1)W[t].c();z=b(),B=g("div"),y(o,"class","svelte-gzhtdy"),y(l,"class","svelte-gzhtdy"),_(l,"iswhite",t[3]),y(i,"class","svelte-gzhtdy"),y(a,"class","svelte-gzhtdy"),y(d,"class","svelte-gzhtdy"),y(E,"class","svelte-gzhtdy"),y(e,"class","game-status svelte-gzhtdy"),y(B,"class","marker svelte-gzhtdy"),y(B,"style",t[2]),y(A,"class","field-root svelte-gzhtdy"),y(n,"class","field-container svelte-gzhtdy")},m(r,$){p(r,n,$),h(n,e),h(e,o),h(e,s),h(e,l),h(e,c),h(e,i),h(e,u),h(e,a),h(e,f),h(e,d),h(e,x),h(e,E),h(E,w),h(E,C),h(n,k),h(n,A);for(let t=0;t<W.length;t+=1)W[t].m(A,null);h(A,z),h(A,B),t[8](A),L=!0,T||(K=[v(A,"mousemove",t[5]),v(A,"mouseleave",t[6])],T=!0)},p(t,[n]){if(8&n&&_(l,"iswhite",t[3]),(!L||1&n)&&N!==(N=64-t[0].board.filter(ht).length+"")&&function(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}(C,N),17&n){let e;for(O=t[0].board,e=0;e<O.length;e+=1){const o=at(t,O,e);W[e]?(W[e].p(o,n),X(W[e],1)):(W[e]=ft(o),W[e].c(),X(W[e],1),W[e].m(A,z))}for(P(),e=O.length;e<W.length;e+=1)I(e);D()}(!L||4&n)&&y(B,"style",t[2])},i(t){if(!L){for(let t=0;t<O.length;t+=1)X(W[t]);L=!0}},o(t){W=W.filter(Boolean);for(let t=0;t<W.length;t+=1)F(W[t]);L=!1},d(e){e&&$(n),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(W,e),t[8](null),T=!1,r(K)}}}const ht=t=>t>0;function pt(t,n,e){let o,r=function(){const t=Array(64).fill(0);return t[et(3,3)]=t[et(4,4)]=2,t[et(4,3)]=t[et(3,4)]=1,{move:rt.BLACK,board:t}}();function s(t){const n=i.get(t);if(n){e(0,r.board[t]=r.move,r);for(const t of n)e(0,r.board[t]=r.move,r);e(0,r.move=r.move===rt.BLACK?rt.WHITE:rt.BLACK,r),e(0,r.board=r.board.slice(),r)}}const l={color:0};let c="";let i,u,a;return t.$$.update=()=>{if(1&t.$$.dirty&&(i=function(t){const{board:n,move:e}=t,o=new Map;let r=e===rt.BLACK?rt.WHITE:rt.BLACK;return n.map((t,n)=>[t,n]).filter(([t])=>t===e).forEach(([t,e])=>{const[s,l]=(t=>[t%8,t/8|0])(e);ot.forEach(([t,e])=>{let c=[];for(let i=s+t,u=l+e;i>=0&&i<8&&u>=0&&l<8;i+=t,u+=e){const t=et(i,u),e=n[t];if(e!==r){if(e===rt.NONE){c.length&&o.set(t,c.concat(o.get(t)||[]));break}break}c.push(t)}})}),o}(r)),2&t.$$.dirty&&e(11,u=o?.getBoundingClientRect()),1&t.$$.dirty&&e(3,a=r.move===rt.WHITE),2560&t.$$.dirty&&u){const{x:t,y:n,color:o}=l;e(2,c=`\n        left: ${t/8*(u.width-14)+2*t}px;\n        top: ${n/8*(u.height-14)+2*n}px;\n        border: ${0===o?"transparent":1===o?"3px solid rgba(255 0 0 / 0.8)":"3px solid rgba(0 255 0 / 0.8)"};\n      `)}},[r,o,c,a,s,function(t){const{left:n,top:o,width:r,height:s}=u,{clientX:c,clientY:a}=t,[f,d]=[(c-n)/r*8|0,(a-o)/s*8|0];e(9,l.color=i.has(et(f,d))?2:1,l),f===l.x&&d===l.y||(e(9,l.x=f,l),e(9,l.y=d,l))},function(){e(9,l.color=0,l)},t=>s(t),function(t){B[t?"unshift":"push"](()=>{o=t,e(1,o)})}]}class $t extends tt{constructor(t){super(),Z(this,t,pt,dt,l,{})}}function gt(n){let e,o;return e=new $t({}),{c(){J(e.$$.fragment)},m(t,n){Q(e,t,n),o=!0},p:t,i(t){o||(X(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}return new class extends tt{constructor(t){super(),Z(this,t,null,gt,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
