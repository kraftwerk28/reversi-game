var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(n)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e}function c(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}const u="undefined"!=typeof window;let a=u?()=>window.performance.now():()=>Date.now(),f=u?t=>requestAnimationFrame(t):t;const d=new Set;function p(t){d.forEach(e=>{e.c(t)||(d.delete(e),e.f())}),0!==d.size&&f(p)}function $(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function g(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function b(){return v(" ")}function _(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function x(t,e,n){t.classList[n?"add":"remove"](e)}const w=new Set;let C,B=0;function A(t,e,n,o,s,r,l,i=0){const c=16.666/o;let u="{\n";for(let t=0;t<=1;t+=c){const o=e+(n-e)*r(t);u+=100*t+`%{${l(o,1-o)}}\n`}const a=u+`100% {${l(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${i}`,d=t.ownerDocument;w.add(d);const p=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild(g("style")).sheet),$=d.__svelte_rules||(d.__svelte_rules={});$[f]||($[f]=!0,p.insertRule(`@keyframes ${f} ${a}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?m+", ":""}${f} ${o}ms linear ${s}ms 1 both`,B+=1,f}function N(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),s=n.length-o.length;s&&(t.style.animation=o.join(", "),B-=s,B||f(()=>{B||(w.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),w.clear())}))}function W(t){C=t}const T=[],O=[],k=[],I=[],L=Promise.resolve();let q=!1;function K(t){k.push(t)}let z=!1;const H=new Set;function R(){if(!z){z=!0;do{for(let t=0;t<T.length;t+=1){const e=T[t];W(e),S(e.$$)}for(W(null),T.length=0;O.length;)O.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];H.has(e)||(H.add(e),e())}k.length=0}while(T.length);for(;I.length;)I.pop()();q=!1,z=!1,H.clear()}}function S(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}let M;function G(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}const j=new Set;let P;function D(){P={r:0,c:[],p:P}}function X(){P.r||s(P.c),P=P.p}function F(t,e){t&&t.i&&(j.delete(t),t.i(e))}function Y(t,e,n,o){if(t&&t.o){if(j.has(t))return;j.add(t),P.c.push(()=>{j.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}const J={duration:0};function Q(n,o,l,i){let c=o(n,l),u=i?0:1,$=null,m=null,h=null;function g(){h&&N(n,h)}function v(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function b(o){const{delay:r=0,duration:l=300,easing:i=e,tick:b=t,css:_}=c||J,y={start:a()+r,b:o};o||(y.group=P,P.r+=1),$||m?m=y:(_&&(g(),h=A(n,u,o,l,r,i,_)),o&&b(0,1),$=v(y,l),K(()=>G(n,o,"start")),function(t){let e;0===d.size&&f(p),new Promise(n=>{d.add(e={c:t,f:n})})}(t=>{if(m&&t>m.start&&($=v(m,l),m=null,G(n,$.b,"start"),_&&(g(),h=A(n,u,$.b,$.duration,0,i,c.css))),$)if(t>=$.end)b(u=$.b,1-u),G(n,$.b,"end"),m||($.b?g():--$.group.r||s($.group.c)),$=null;else if(t>=$.start){const e=t-$.start;u=$.a+$.d*i(e/$.duration),b(u,1-u)}return!(!$&&!m)}))}return{run(t){r(c)?(M||(M=Promise.resolve(),M.then(()=>{M=null})),M).then(()=>{c=c(),b(t)}):b(t)},end(){g(),$=m=null}}}function U(t){t&&t.c()}function V(t,e,o){const{fragment:l,on_mount:i,on_destroy:c,after_update:u}=t.$$;l&&l.m(e,o),K(()=>{const e=i.map(n).filter(r);c?c.push(...e):s(e),t.$$.on_mount=[]}),u.forEach(K)}function Z(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function tt(t,e){-1===t.$$.dirty[0]&&(T.push(t),q||(q=!0,L.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function et(e,n,r,l,i,c,u=[-1]){const a=C;W(e);const f=n.props||{},d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:i,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:o(),dirty:u,skip_bound:!1};let p=!1;if(d.ctx=r?r(e,f,(t,n,...o)=>{const s=o.length?o[0]:n;return d.ctx&&i(d.ctx[t],d.ctx[t]=s)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](s),p&&tt(e,t)),n}):[],d.update(),p=!0,s(d.before_update),d.fragment=!!l&&l(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(h)}else d.fragment&&d.fragment.c();n.intro&&F(e.$$.fragment),V(e,n.target,n.anchor),R()}W(a)}class nt{$destroy(){Z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ot=(t,{duration:n=300})=>({duration:n,easing:e,css:(t,e)=>`\n      transform: rotateX(${.5*t}turn)\n                 scale(${2*(t>=.5?e:t)+1});\n      visibility: ${t>=.5?"visible":"hidden"};\n    `}),st=(t,e)=>8*e+t,rt=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];function lt(t){const{move:e,board:n,pass:o}=t,s=new Map;let r=e===ct.BLACK?ct.WHITE:ct.BLACK;return n.map((t,e)=>[t,e]).filter(([t])=>t===e).forEach(([t,e])=>{const[o,l]=(t=>[t%8,t/8|0])(e);rt.forEach(([t,e])=>{let i=[];for(let c=o+t,u=l+e;c>=0&&c<8&&u>=0&&l<8;c+=t,u+=e){const t=st(c,u),e=n[t];if(e!==r){if(e===ct.NONE){i.length&&s.set(t,i.concat(s.get(t)||[]));break}break}i.push(t)}})}),s}function it(){const t=Array(64).fill(ct.NONE);return t[st(3,3)]=t[st(4,4)]=ct.WHITE,t[st(4,3)]=t[st(3,4)]=ct.BLACK,{move:ct.BLACK,board:t,pass:!1}}const ct={NONE:0,BLACK:1,WHITE:2,BLACK_WON:3,WHITE_WON:4,TIE:5};function ut(t){let e,n,o;return{c(){e=g("div"),y(e,"class","disc b svelte-1pbl36q")},m(t,n){m(t,e,n),o=!0},i(t){o||(K(()=>{n||(n=Q(e,ot,{},!0)),n.run(1)}),o=!0)},o(t){n||(n=Q(e,ot,{},!1)),n.run(0),o=!1},d(t){t&&h(e),t&&n&&n.end()}}}function at(t){let e,n,o;return{c(){e=g("div"),y(e,"class","disc w svelte-1pbl36q")},m(t,n){m(t,e,n),o=!0},i(t){o||(K(()=>{n||(n=Q(e,ot,{},!0)),n.run(1)}),o=!0)},o(t){n||(n=Q(e,ot,{},!1)),n.run(0),o=!1},d(t){t&&h(e),t&&n&&n.end()}}}function ft(t){let e,n,o,s,r,l=t[0]===ct.BLACK&&ut(),i=t[0]===ct.WHITE&&at();return{c(){e=g("div"),l&&l.c(),n=b(),i&&i.c(),y(e,"class","root svelte-1pbl36q")},m(c,u){m(c,e,u),l&&l.m(e,null),$(e,n),i&&i.m(e,null),o=!0,s||(r=_(e,"click",t[1]),s=!0)},p(t,[o]){t[0]===ct.BLACK?l?1&o&&F(l,1):(l=ut(),l.c(),F(l,1),l.m(e,n)):l&&(D(),Y(l,1,1,()=>{l=null}),X()),t[0]===ct.WHITE?i?1&o&&F(i,1):(i=at(),i.c(),F(i,1),i.m(e,null)):i&&(D(),Y(i,1,1,()=>{i=null}),X())},i(t){o||(F(l),F(i),o=!0)},o(t){Y(l),Y(i),o=!1},d(t){t&&h(e),l&&l.d(),i&&i.d(),s=!1,r()}}}function dt(t,e,n){let{color:o}=e;return t.$$set=t=>{"color"in t&&n(0,o=t.color)},[o,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}(t,e)}]}class pt extends nt{constructor(t){super(),et(this,t,dt,ft,l,{color:0})}}function $t(t){let e,n,o,s,l;return{c(){e=g("div"),n=g("h1"),o=v(t[1]),y(n,"class","svelte-1x575e7"),y(e,"class","root svelte-1x575e7")},m(i,c){m(i,e,c),$(e,n),$(n,o),s||(l=_(e,"click",(function(){r(t[0])&&t[0].apply(this,arguments)})),s=!0)},p(e,n){t=e,2&n&&E(o,t[1])},d(t){t&&h(e),s=!1,l()}}}function mt(e){let n,o=e[2]&&$t(e);return{c(){o&&o.c(),n=v("")},m(t,e){o&&o.m(t,e),m(t,n,e)},p(t,[e]){t[2]?o?o.p(t,e):(o=$t(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&h(n)}}}function ht(t,e,n){let o,s,{gameState:r}=e,{onGameRestart:l}=e;return t.$$set=t=>{"gameState"in t&&n(3,r=t.gameState),"onGameRestart"in t&&n(0,l=t.onGameRestart)},t.$$.update=()=>{if(8&t.$$.dirty&&n(2,s=[ct.TIE,ct.BLACK_WON,ct.WHITE_WON].includes(r.move)),8&t.$$.dirty)if(r.move===ct.TIE)n(1,o="ü§∑Tie!");else{const t=r.move===ct.WHITE_WON?"üåù":"üåö";n(1,o=t+" won!")}},[l,o,s,r]}class gt extends nt{constructor(t){super(),et(this,t,ht,mt,l,{gameState:3,onGameRestart:0})}}const vt=[];function bt(e){let n;return{c(){n=g("div"),y(n,"class","marker svelte-i8r4tq"),y(n,"style",e[0]),x(n,"allow",e[1]),x(n,"visible",e[2].visible)},m(t,e){m(t,n,e)},p(t,[e]){1&e&&y(n,"style",t[0]),2&e&&x(n,"allow",t[1]),4&e&&x(n,"visible",t[2].visible)},i:t,o:t,d(t){t&&h(n)}}}const _t=function(e,n=t){let o;const s=[];function r(t){if(l(e,t)&&(e=t,o)){const t=!vt.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),vt.push(n,e)}if(t){for(let t=0;t<vt.length;t+=2)vt[t][0](vt[t+1]);vt.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(l,i=t){const c=[l,i];return s.push(c),1===s.length&&(o=n(r)||t),l(e),()=>{const t=s.indexOf(c);-1!==t&&s.splice(t,1),0===s.length&&(o(),o=null)}}}}({visible:!1});function yt(){_t.update(t=>({...t,visible:!1}))}function Et(t,e,n){let o;c(t,_t,t=>n(2,o=t));let s,{possibleMoves:r}=e,{fieldBounds:l}=e,i="";return t.$$set=t=>{"possibleMoves"in t&&n(3,r=t.possibleMoves),"fieldBounds"in t&&n(4,l=t.fieldBounds)},t.$$.update=()=>{if(12&t.$$.dirty&&n(1,s=r.has(st(o.x,o.y))),20&t.$$.dirty&&l){const{x:t,y:e}=o;n(0,i=`\n        left: ${t/8*(l.width-14)+2*t}px;\n        top: ${e/8*(l.height-14)+2*e}px;\n      `)}},[i,s,o,r,l]}class xt extends nt{constructor(t){super(),et(this,t,Et,bt,l,{possibleMoves:3,fieldBounds:4})}}function wt(t,e,n){const o=t.slice();return o[15]=e[n],o[17]=n,o}function Ct(t){let e,n;return e=new pt({props:{color:t[15]}}),e.$on("click",(function(...e){return t[10](t[17],...e)})),{c(){U(e.$$.fragment)},m(t,o){V(e,t,o),n=!0},p(n,o){t=n;const s={};1&o&&(s.color=t[15]),e.$set(s)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Bt(t){let e,n,o,r,l,i,c,u,a,f,d,p,w,C,B,A,N,W,T,O,k,I,L,q,K=t[0].board,z=[];for(let e=0;e<K.length;e+=1)z[e]=Ct(wt(t,K,e));const H=t=>Y(z[t],1,1,()=>{z[t]=null});return T=new xt({props:{fieldBounds:t[2],possibleMoves:t[3]}}),k=new gt({props:{gameState:t[0],onGameRestart:t[8]}}),{c(){e=g("div"),n=g("div"),o=g("span"),o.textContent="üåö",r=b(),l=g("span"),l.textContent="üëà",i=b(),c=g("span"),c.textContent="üåù",u=b(),a=g("span"),a.textContent="¬†",f=b(),d=g("span"),d.textContent="‚ö™",p=b(),w=g("span"),C=v("x"),B=v(t[5]),A=b(),N=g("div");for(let t=0;t<z.length;t+=1)z[t].c();W=b(),U(T.$$.fragment),O=b(),U(k.$$.fragment),y(o,"class","svelte-1gq2pz0"),y(l,"class","svelte-1gq2pz0"),x(l,"iswhite",t[4]),y(c,"class","svelte-1gq2pz0"),y(a,"class","svelte-1gq2pz0"),y(d,"class","svelte-1gq2pz0"),y(w,"class","svelte-1gq2pz0"),y(n,"class","game-status svelte-1gq2pz0"),y(N,"class","field-root svelte-1gq2pz0"),x(N,"blurred",t[6]),y(e,"class","field-container svelte-1gq2pz0")},m(s,h){m(s,e,h),$(e,n),$(n,o),$(n,r),$(n,l),$(n,i),$(n,c),$(n,u),$(n,a),$(n,f),$(n,d),$(n,p),$(n,w),$(w,C),$(w,B),$(e,A),$(e,N);for(let t=0;t<z.length;t+=1)z[t].m(N,null);$(N,W),V(T,N,null),t[11](N),$(e,O),V(k,e,null),I=!0,L||(q=[_(window,"resize",t[9]),_(N,"mousemove",t[12]),_(N,"mouseleave",yt)],L=!0)},p(t,[e]){if(16&e&&x(l,"iswhite",t[4]),(!I||32&e)&&E(B,t[5]),129&e){let n;for(K=t[0].board,n=0;n<K.length;n+=1){const o=wt(t,K,n);z[n]?(z[n].p(o,e),F(z[n],1)):(z[n]=Ct(o),z[n].c(),F(z[n],1),z[n].m(N,W))}for(D(),n=K.length;n<z.length;n+=1)H(n);X()}const n={};4&e&&(n.fieldBounds=t[2]),8&e&&(n.possibleMoves=t[3]),T.$set(n),64&e&&x(N,"blurred",t[6]);const o={};1&e&&(o.gameState=t[0]),k.$set(o)},i(t){if(!I){for(let t=0;t<K.length;t+=1)F(z[t]);F(T.$$.fragment,t),F(k.$$.fragment,t),I=!0}},o(t){z=z.filter(Boolean);for(let t=0;t<z.length;t+=1)Y(z[t]);Y(T.$$.fragment,t),Y(k.$$.fragment,t),I=!1},d(n){n&&h(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(z,n),Z(T),t[11](null),Z(k),L=!1,s(q)}}}function At(t,e,n){let o,s,r=it();function l(){n(0,r.move=r.move===ct.BLACK?ct.WHITE:ct.BLACK,r)}function i(t){const e=u.get(t);if(e){n(0,r.board[t]=r.move,r);for(const t of e)n(0,r.board[t]=r.move,r);n(0,r.board=r.board.slice(),r),l(),n(3,u=lt(r)),function(){if(r.board.every(t=>t!==ct.NONE)){const t=r.board.reduce((t,e)=>t+(e===ct.BLACK?1:0),0);return void n(0,r.move=t>32?ct.BLACK_WON:ct.WHITE_WON,r)}0===u.size&&(r.pass?n(0,r.move=ct.TIE,r):(l(),n(0,r.pass=!0,r)))}()}}function c(){n(2,s=o?.getBoundingClientRect())}let u,a,f,d;return t.$$.update=()=>{1&t.$$.dirty&&n(3,u=lt(r)),2&t.$$.dirty&&c(),1&t.$$.dirty&&n(4,a=r.move===ct.WHITE),1&t.$$.dirty&&n(5,f=64-r.board.filter(t=>t>0).length),1&t.$$.dirty&&n(6,d=[ct.TIE,ct.BLACK_WON,ct.WHITE_WON].includes(r.move))},[r,o,s,u,a,f,d,i,function(){n(0,r=it())},c,t=>i(t),function(t){O[t?"unshift":"push"](()=>{o=t,n(1,o)})},t=>function(t,e){const{left:n,top:o,width:s,height:r}=e,{clientX:l,clientY:i}=t,[c,u]=[(l-n)/s*8|0,(i-o)/r*8|0];_t.update(t=>c===t.x&&u===t.y&&t.visible?t:{...t,x:c,y:u,visible:!0})}(t,s)]}class Nt extends nt{constructor(t){super(),et(this,t,At,Bt,l,{})}}function Wt(e){let n,o;return n=new Nt({}),{c(){U(n.$$.fragment)},m(t,e){V(n,t,e),o=!0},p:t,i(t){o||(F(n.$$.fragment,t),o=!0)},o(t){Y(n.$$.fragment,t),o=!1},d(t){Z(n,t)}}}return new class extends nt{constructor(t){super(),et(this,t,null,Wt,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
